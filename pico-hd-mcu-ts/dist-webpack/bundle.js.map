{"version":3,"file":"bundle.js","mappings":";;;;;;;AAAa;AACb;AACA;AACA;AACA,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,OAAO;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB;AACnB,eAAe,mBAAO,CAAC,GAAU;AACjC,kBAAkB,mBAAO,CAAC,GAA2B;AACrD,uBAAuB,mBAAO,CAAC,GAAgC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,qBAAqB;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,+FAA+F;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;;;;;;;;ACpIN;AACb;AACA;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD;AACA,6EAA6E,OAAO;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,GAAG,gBAAgB;AACnC,eAAe,mBAAO,CAAC,GAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gBAAgB;AAChB,gBAAgB;;;;;;;;AC/CH;AACb;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB,aAAa,mBAAO,CAAC,CAAM;AAC3B,cAAc,mBAAO,CAAC,GAAS;AAC/B,eAAe,mBAAO,CAAC,GAAU;AACjC,kBAAkB,mBAAO,CAAC,GAA2B;AACrD,kBAAkB,mBAAO,CAAC,GAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,gEAAgE;AAChE;AACA,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,sGAAsG,0EAA0E;AAChL;AACA,CAAC;AACD;AACA;AACA,qGAAqG,8BAA8B;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG,2DAA2D;AAChK;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,uBAAuB;;;;;;;;ACzGV;AACb;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,cAAc;;;;;;;;ACjED;AACb;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe;AACf,aAAa,mBAAO,CAAC,GAAM;AAC3B,YAAY,mBAAO,CAAC,EAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;ACtGF;AACb;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,GAAG,eAAe;AACjC,kBAAkB,mBAAO,CAAC,GAA2B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;ACvDF;AACb;AACA;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B;AAC1B,qBAAqB,mBAAO,CAAC,GAAiB;AAC9C,mBAAmB,mBAAO,CAAC,GAA+B;AAC1D,kBAAkB,mBAAO,CAAC,GAA8B;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;;;;;;;;AClDb;AACb;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B;AAC1B,uBAAuB,mBAAO,CAAC,GAAuB;AACtD,eAAe,mBAAO,CAAC,EAAe;AACtC,eAAe,mBAAO,CAAC,GAAW;AAClC,qBAAqB,mBAAO,CAAC,GAAiB;AAC9C,mBAAmB,mBAAO,CAAC,GAA+B;AAC1D,kBAAkB,mBAAO,CAAC,GAA8B;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,2DAA2D,mIAAmI;AAC9L;AACA,yCAAyC,uIAAuI;AAChL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,gIAAgI;AACnO;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;;;;;;;;ACtFb;AACb;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB;AACzB,cAAc,mBAAO,CAAC,GAAU;AAChC,eAAe,mBAAO,CAAC,GAAW;AAClC,eAAe,mBAAO,CAAC,GAAQ;AAC/B,kBAAkB,mBAAO,CAAC,GAA8B;AACxD,qBAAqB,mBAAO,CAAC,GAAiB;AAC9C,mBAAmB,mBAAO,CAAC,GAA+B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,kCAAkC;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,4CAA4C;AACrI,KAAK;AACL;AACA;AACA,wFAAwF,kCAAkC;AAC1H;AACA;AACA,8FAA8F,kCAAkC;AAChI;AACA;AACA,+FAA+F,kCAAkC;AACjI;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,gBAAgB;AACzG;AACA;AACA;AACA,qFAAqF,kCAAkC;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,aAAa;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,cAAc;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,6DAA6D;AAC9I,mFAAmF,6DAA6D;AAChJ;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;;;;;;;;AC7MZ;AACb;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B;AAC1B,cAAc,mBAAO,CAAC,GAAU;AAChC,kBAAkB,mBAAO,CAAC,GAA8B;AACxD,mBAAmB,mBAAO,CAAC,GAA+B;AAC1D,qBAAqB,mBAAO,CAAC,GAAiB;AAC9C,eAAe,mBAAO,CAAC,GAAW;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;;;;;;;;AC7Eb;AACb;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,4BAA4B;AAC5B,qBAAqB,mBAAO,CAAC,GAAiB;AAC9C,kBAAkB,mBAAO,CAAC,GAA8B;AACxD,mBAAmB,mBAAO,CAAC,GAA+B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;;;;;;;;ACtGf;AACb;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,6IAA6I,cAAc;AAC3J,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc,GAAG,kBAAkB,GAAG,mBAAmB,GAAG,gBAAgB,GAAG,iBAAiB,GAAG,mBAAmB;AACtH,WAAW,mBAAO,CAAC,GAAI;AACvB;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AACD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,8BAA8B;AAC9B;AACA,cAAc;;;;;;;;AC/ED;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY,GAAG,gBAAgB,GAAG,iBAAiB,GAAG,0BAA0B,GAAG,sBAAsB,GAAG,mBAAmB,GAAG,qBAAqB,GAAG,qBAAqB,GAAG,mBAAmB,GAAG,iBAAiB,GAAG,mBAAmB,GAAG,qBAAqB,GAAG,uBAAuB,GAAG,mBAAmB;AACvT,mBAAmB;AACnB,uBAAuB;AACvB,qBAAqB;AACrB,mBAAmB;AACnB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACtHa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,mBAAmB,GAAG,sBAAsB,GAAG,eAAe,GAAG,uBAAuB,GAAG,uBAAuB,GAAG,yBAAyB,GAAG,uBAAuB;AAC9L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;;;;;;;;AC1HN;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,qBAAqB;;;;;;;;ACHrB;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;ACtBa;AACb;AACA;AACA;AACA,6BAA6C,EAAE,aAAa,CAAC;AAC7D,eAAe,mBAAO,CAAC,GAAU;AACjC,kBAAkB,mBAAO,CAAC,GAAa;AACvC,sBAAsB,mBAAO,CAAC,GAAiB;AAC/C,uBAAuB,mBAAO,CAAC,GAAgC;AAC/D,kBAAkB,mBAAO,CAAC,GAA2B;AACrD,4BAA4B,mBAAO,CAAC,GAAgC;AACpE,6BAA6B,mBAAO,CAAC,GAAiC;AACtE,+BAA+B,mBAAO,CAAC,GAAmC;AAC1E,4BAA4B,mBAAO,CAAC,GAAgC;AACpE,6BAA6B,mBAAO,CAAC,GAAiC;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,oEAAoE,+BAA+B,yBAAyB;AACvK,uHAAuH,qBAAqB,qBAAqB,mBAAmB;AACpL;AACA;AACA,2CAA2C,oEAAoE,+BAA+B,wBAAwB;AACtK,sHAAsH,sBAAsB,qBAAqB,mBAAmB;AACpL;AACA;AACA,iHAAiH,mBAAmB;AACpI,uHAAuH,mBAAmB;AAC1I;AACA;AACA,wHAAwH,qBAAqB,qBAAqB,mBAAmB;AACrL,0HAA0H,qBAAqB,qBAAqB,mBAAmB;AACvL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,8DAA8D;AACjK;AACA,CAAC","sources":["webpack://pico-hd-mcu/./src/base-service.ts","webpack://pico-hd-mcu/./src/event-bus.ts","webpack://pico-hd-mcu/./src/event-handler.ts","webpack://pico-hd-mcu/./src/lib/hc4051.ts","webpack://pico-hd-mcu/./src/lib/max6675-hw-spi.ts","webpack://pico-hd-mcu/./src/logger.ts","webpack://pico-hd-mcu/./src/services/system-stats-service.ts","webpack://pico-hd-mcu/./src/services/thermometer-service.ts","webpack://pico-hd-mcu/./src/services/turn-signal-service.ts","webpack://pico-hd-mcu/./src/services/vehicle-info.service.ts","webpack://pico-hd-mcu/./src/services/vehicle-sensor-service.ts","webpack://pico-hd-mcu/./src/utils.ts","webpack://pico-hd-mcu/../ts-schema/constants.ts","webpack://pico-hd-mcu/../ts-schema/data.model.ts","webpack://pico-hd-mcu/../ts-schema/schema.version.ts","webpack://pico-hd-mcu/external commonjs \"button\"","webpack://pico-hd-mcu/external commonjs \"events\"","webpack://pico-hd-mcu/external commonjs \"fs\"","webpack://pico-hd-mcu/external commonjs \"gpio\"","webpack://pico-hd-mcu/external commonjs \"spi\"","webpack://pico-hd-mcu/external commonjs \"uart\"","webpack://pico-hd-mcu/webpack/bootstrap","webpack://pico-hd-mcu/./src/index.ts"],"sourcesContent":["\"use strict\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseService = void 0;\nvar logger_1 = require(\"./logger\");\nvar constants_1 = require(\"../../ts-schema/constants\");\nvar schema_version_1 = require(\"../../ts-schema/schema.version\");\nvar BaseService = /** @class */ (function () {\n    function BaseService(eventBus, options) {\n        var _this = this;\n        var _a, _b, _c;\n        this.options = {\n            serviceCode: options.serviceCode,\n            serviceType: options.serviceType,\n            updateInterval: (_a = options.updateInterval) !== null && _a !== void 0 ? _a : 1000 * 5,\n            idleTimeout: (_b = options.idleTimeout) !== null && _b !== void 0 ? _b : 1000 * 120,\n            broadcastMode: (_c = options.broadcastMode) !== null && _c !== void 0 ? _c : constants_1.BroadcastMode.OnDemandPolling,\n            commands: options.commands && options.commands.length > 0 ? __spreadArray(__spreadArray([], Object.values(constants_1.ServiceCommand), true), options.commands, true) : Object.values(constants_1.ServiceCommand),\n        };\n        this.eventBus = eventBus !== null && eventBus !== void 0 ? eventBus : { emit: function () { }, on: function () { } };\n        this.status = constants_1.ServiceStatus.Initialized;\n        this.broadcastPid = null;\n        this.isRunning = false;\n        this.data = {};\n        this.eventBus.on(constants_1.EventType.CommandForService, function (code, command, raw) {\n            if (code === _this.options.serviceCode) {\n                _this.handleCommand(command, raw);\n            }\n        });\n    }\n    BaseService.prototype.handleCommand = function (command, raw) {\n        logger_1.Logging.debug(this.options.serviceCode, constants_1.EventType.CommandForService, command, raw);\n        switch (command) {\n            case constants_1.ServiceCommand.START:\n                this.start();\n                break;\n            case constants_1.ServiceCommand.STOP:\n                this.stop();\n                break;\n            case constants_1.ServiceCommand.INFO:\n                this.publishInformation();\n                break;\n            case constants_1.ServiceCommand.DATA:\n                this.publishData();\n                break;\n            case constants_1.ServiceCommand.SET:\n                this.peristSettings(raw);\n                break;\n            default:\n                break;\n        }\n    };\n    BaseService.prototype.isStarted = function () {\n        return this.status === constants_1.ServiceStatus.Started;\n    };\n    BaseService.prototype.setup = function () {\n        logger_1.Logging.info(this.options.serviceCode, \"setup\");\n        this.status = constants_1.ServiceStatus.Available;\n    };\n    BaseService.prototype.start = function () {\n        var _this = this;\n        if (this.isStarted()) {\n            logger_1.Logging.info(this.options.serviceCode, \"already running\");\n            return;\n        }\n        logger_1.Logging.info(this.options.serviceCode, \"starting\");\n        this.isRunning = true;\n        if (this.options.broadcastMode === constants_1.BroadcastMode.ContinuousStream) {\n            this.broadcastPid = setInterval(function () {\n                _this.publishData();\n            }, this.options.updateInterval || 1000 * 5);\n        }\n        logger_1.Logging.info(this.options.serviceCode, \"started.\");\n        if (this.options.broadcastMode === constants_1.BroadcastMode.ContinuousStream) {\n            setTimeout(function () {\n                _this.stop();\n            }, this.options.idleTimeout || 1000 * 120);\n        }\n        this.status = constants_1.ServiceStatus.Started;\n        this.publishInformation();\n    };\n    BaseService.prototype.stop = function () {\n        if (!this.isRunning) {\n            logger_1.Logging.info(this.options.serviceCode, \"already stopped\");\n            return;\n        }\n        logger_1.Logging.info(this.options.serviceCode, \"stopping\");\n        if (this.broadcastPid) {\n            clearInterval(this.broadcastPid);\n        }\n        this.isRunning = false;\n        this.broadcastPid = null;\n        logger_1.Logging.info(this.options.serviceCode, \"stopped.\");\n        this.status = constants_1.ServiceStatus.Stopped;\n        this.publishInformation();\n    };\n    BaseService.prototype.getInfo = function () {\n        return __assign({ schemaVersion: schema_version_1.SchemaVersion, status: this.status, isRunning: this.isRunning }, this.options);\n    };\n    BaseService.prototype.peristSettings = function (data) {\n        logger_1.Logging.debug(this.options.serviceCode, constants_1.ServiceCommand.SET, data);\n    };\n    BaseService.prototype.publishData = function () {\n        logger_1.Logging.debug(this.options.serviceCode, constants_1.ServiceCommand.DATA);\n        this.eventBus.emit(constants_1.EventType.DataFromService, this.options.serviceCode, constants_1.ServiceCommand.DATA, this.data);\n    };\n    BaseService.prototype.publishInformation = function () {\n        logger_1.Logging.debug(this.options.serviceCode, constants_1.ServiceCommand.INFO, this.isRunning);\n        this.eventBus.emit(constants_1.EventType.DataFromService, this.options.serviceCode, constants_1.ServiceCommand.INFO, this.getInfo());\n    };\n    return BaseService;\n}());\nexports.BaseService = BaseService;\n","\"use strict\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.eventBus = exports.EventBus = void 0;\nvar events_1 = require(\"events\");\nvar EventBus = /** @class */ (function (_super) {\n    __extends(EventBus, _super);\n    function EventBus() {\n        return _super.call(this) || this;\n    }\n    EventBus.prototype.on = function (event, listener) {\n        _super.prototype.on.call(this, event, listener);\n    };\n    EventBus.prototype.emit = function (event) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        _super.prototype.emit.apply(this, __spreadArray([event], args, false));\n    };\n    return EventBus;\n}(events_1.EventEmitter));\nexports.EventBus = EventBus;\nexports.eventBus = new EventBus();\n","\"use strict\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.publishToSerial = void 0;\nvar uart_1 = require(\"uart\");\nvar utils_1 = require(\"./utils\");\nvar logger_1 = require(\"./logger\");\nvar constants_1 = require(\"../../ts-schema/constants\");\nvar event_bus_1 = require(\"./event-bus\");\nvar uartOptions = {\n    baudrate: 9600,\n    bits: 8,\n    partity: uart_1.UART.PARTIY_NONE,\n    stop: 1,\n    flow: uart_1.UART.FLOW_NONE,\n    bufferSize: 2048,\n};\nvar Serial = new uart_1.UART(0, uartOptions);\nlogger_1.Logging.info(constants_1.ServiceCode.EventBus, \"emitter ready\");\nsetTimeout(function () {\n    Serial.write(\"AT+NAME\".concat(constants_1.Hardware.MCU_NAME, \"\\n\"));\n    logger_1.Logging.info(constants_1.ServiceCode.EventBus, \"uart setup done\", \"AT+NAME\".concat(constants_1.Hardware.MCU_NAME));\n    Serial;\n}, 1000);\nlogger_1.Logging.info(constants_1.ServiceCode.EventBus, \"uart ready\", uartOptions.baudrate);\nvar _serialPayload = \"\";\nvar fileBuffer = \"\";\nvar inFileTransferMode = false;\nSerial.on(\"data\", function (data) {\n    data.forEach(function (byte) {\n        // Detect start and end markers for file transfer mode\n        if (!inFileTransferMode && _serialPayload.includes(\"<START>\")) {\n            inFileTransferMode = true;\n            fileBuffer = \"\"; // Reset file buffer for new transfer\n            _serialPayload = \"\";\n            return;\n        }\n        else if (inFileTransferMode && _serialPayload.includes(\"<END>\")) {\n            inFileTransferMode = false;\n            saveFileBuffer(fileBuffer);\n            fileBuffer = \"\";\n            _serialPayload = \"\";\n            return;\n        }\n        // Regular handling for commands and file data\n        if (byte === 10) {\n            // Newline byte\n            if (!inFileTransferMode) {\n                // Command mode: handle command payload\n                if (_serialPayload.includes(\"OK\")) {\n                    logger_1.Logging.debug(constants_1.ServiceCode.EventBus, \"SERIAL_PAYLOAD\", _serialPayload);\n                }\n                else {\n                    event_bus_1.eventBus.emit(constants_1.EventType.DataFromSerial, _serialPayload.trim());\n                }\n            }\n            else {\n                // File transfer mode: append payload to file buffer\n                fileBuffer += _serialPayload;\n            }\n            _serialPayload = \"\"; // Reset payload after processing\n        }\n        else if (byte !== 0) {\n            _serialPayload += String.fromCharCode(byte).trim(); // Append byte to payload\n        }\n    });\n});\nvar saveFileBuffer = function (buffer) {\n    (0, utils_1.writeFile)(constants_1.FILE_BUNDLE, buffer);\n};\n// events from services\nevent_bus_1.eventBus.on(constants_1.EventType.DataFromService, function (serviceCode, eventType, serviceData) {\n    logger_1.Logging.debug(constants_1.ServiceCode.EventBus, constants_1.EventType.DataFromService, { serviceCode: serviceCode, eventType: eventType, serviceData: serviceData });\n    Serial.write(\"\".concat(serviceCode).concat(constants_1.Seperator.SerialCommand).concat(eventType).concat(constants_1.Seperator.ServiceData).concat(JSON.stringify(serviceData), \"\\n\"));\n});\n// events from serial\nevent_bus_1.eventBus.on(constants_1.EventType.DataFromSerial, function (serialPayload) {\n    logger_1.Logging.debug(constants_1.ServiceCode.EventBus, constants_1.EventType.DataFromSerial, { serialPayload: serialPayload });\n    var parts = serialPayload.split(constants_1.Seperator.SerialCommand);\n    var serviceCode = parts[0];\n    var command, rawData = null;\n    if (parts[1].startsWith(constants_1.ServiceCommand.SET)) {\n        parts = parts[1].split(constants_1.Seperator.ServiceData);\n        command = parts[0];\n        rawData = parts[1];\n    }\n    else {\n        command = parts[1];\n    }\n    logger_1.Logging.debug(constants_1.ServiceCode.EventBus, constants_1.EventType.DataFromSerial, { serviceCode: serviceCode, command: command, data: rawData });\n    if (serialPayload.startsWith(constants_1.ServiceCode.Module)) {\n        event_bus_1.eventBus.emit(constants_1.EventType.CommandForModule, serviceCode, command, rawData);\n    }\n    else {\n        event_bus_1.eventBus.emit(constants_1.EventType.CommandForService, serviceCode, command, rawData);\n    }\n});\nlogger_1.Logging.info(constants_1.ServiceCode.EventBus, \"eventBus ready\");\nsetInterval(function () {\n    Serial.write(\"0_heartbeat\\n\");\n    //logger.info(ServiceCode.EventBus, '0_heartbeat');\n}, constants_1.Hardware.HEARTBEAT_PUSH_INTERVAL);\nvar publishToSerial = function (serviceCode, eventType, serviceData) {\n    event_bus_1.eventBus.emit(constants_1.EventType.DataFromService, serviceCode, eventType, serviceData);\n};\nexports.publishToSerial = publishToSerial;\n","\"use strict\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HC4051 = void 0;\nvar MUX_CHANNEL_SIZE = 8;\n// C B A - channel\nvar MUX_CHANNEL_SELECT = [\n    [LOW, LOW, LOW], // ch 0\n    [LOW, LOW, HIGH], // ch 1\n    [LOW, HIGH, LOW], // ch 2\n    [LOW, HIGH, HIGH], // ch 3\n    [HIGH, LOW, LOW], // ch 4\n    [HIGH, LOW, HIGH], // ch 5\n    [HIGH, HIGH, LOW], // ch 6\n    [HIGH, HIGH, HIGH], // ch 7\n];\nvar HC4051 = /** @class */ (function () {\n    function HC4051(options) {\n        this.pinData = options.pinData;\n        this.pinA = options.pinA;\n        this.pinB = options.pinB;\n        this.pinC = options.pinC;\n        this.pinInhibit = options.pinInhibit;\n        this.connectedChannels = options.connectedChannels || [0, 1, 2, 3, 4, 5, 6, 7];\n        this.connectedChannelSize = options.connectedChannels ? options.connectedChannels.length : options.connectedChannelSize || MUX_CHANNEL_SIZE;\n    }\n    HC4051.prototype.init = function () {\n        pinMode(this.pinA, OUTPUT);\n        pinMode(this.pinB, OUTPUT);\n        pinMode(this.pinC, OUTPUT);\n        if (this.pinData !== undefined) {\n            pinMode(this.pinData, INPUT);\n        }\n        if (this.pinInhibit !== undefined) {\n            pinMode(this.pinInhibit, OUTPUT);\n        }\n        this.enableChannelIndex(0);\n    };\n    HC4051.prototype.enableChannel = function (channel) {\n        if (this.connectedChannels.indexOf(channel) < 0) {\n            console.error(\"HC4051: channel not connected: \".concat(channel, \" (connected: \").concat(this.connectedChannels, \")\"));\n            return false;\n        }\n        return this.enableChannelIndex(this.connectedChannels.indexOf(channel));\n    };\n    HC4051.prototype.enableChannelIndex = function (chIndex) {\n        if (chIndex >= MUX_CHANNEL_SIZE) {\n            console.error(\"HC4051: channel out of range: \".concat(chIndex, \" (max: \").concat(MUX_CHANNEL_SIZE - 1, \")\"));\n            return false;\n        }\n        if (this.pinInhibit !== undefined) {\n            digitalWrite(this.pinInhibit, LOW);\n        }\n        digitalWrite(this.pinC, MUX_CHANNEL_SELECT[chIndex][0]);\n        digitalWrite(this.pinB, MUX_CHANNEL_SELECT[chIndex][1]);\n        digitalWrite(this.pinA, MUX_CHANNEL_SELECT[chIndex][2]);\n        return true;\n    };\n    HC4051.prototype.disableAll = function () {\n        if (this.pinInhibit !== undefined) {\n            digitalWrite(this.pinInhibit, HIGH);\n        }\n    };\n    return HC4051;\n}());\nexports.HC4051 = HC4051;\n","\"use strict\";\n// refs\n// https://github.com/zhenek-kreker/MAX6675/blob/master/MAX6675.cpp\n// https://github.com/adafruit/MAX6675-library/blob/master/max6675.cpp\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MAX6675 = void 0;\nvar gpio_1 = require(\"gpio\");\nvar spi_1 = require(\"spi\");\nvar MAX6675_BPS = 2 * 1000 * 1000;\nvar MAX6675_OPEN_BIT = 0x4;\nvar MAX6675_CONVERSION_RATIO = 0.25;\nvar MAX6675_READER_CMD = [0, 0, 0, 0];\nvar MAX6675 = /** @class */ (function () {\n    function MAX6675(options) {\n        this.cs = options.cs || 13;\n        this.bus = options.bus || 1;\n        this.spiBus = null;\n        this.spiCs = null;\n        this.spiOptions = {\n            mode: options.mode || spi_1.SPI.MODE_1,\n            baudrate: options.baudrate || MAX6675_BPS,\n            bitorder: options.bitorder || spi_1.SPI.MSB,\n            sck: options.sck || 10,\n            clk: options.sck || 10,\n            miso: options.miso || 12,\n            mosi: -1,\n        };\n    }\n    MAX6675.prototype.init = function () {\n        try {\n            this.spiBus = new spi_1.SPI(this.bus, this.spiOptions);\n            this.spiCs = new gpio_1.GPIO(this.cs, OUTPUT);\n            this.spiCs.high();\n            console.log(\"MAX6675: init\");\n            console.log(this.spiCs);\n            console.log(this.spiBus);\n            return true;\n        }\n        catch (err) {\n            console.error(err);\n            return false;\n        }\n    };\n    MAX6675.prototype.close = function () {\n        if (this.spiBus) {\n            console.log(\"MAX6675: close\");\n            this.spiBus.close();\n        }\n    };\n    MAX6675.prototype.readCelcius = function () {\n        var bytes = this.readRaw();\n        if (bytes & MAX6675_OPEN_BIT) {\n            console.error(\"MAX6675: no thermocouple attached!\");\n            return null;\n        }\n        var value = (bytes >> 3) * MAX6675_CONVERSION_RATIO;\n        return value;\n    };\n    MAX6675.prototype.readFahrenheit = function () {\n        var celsius = this.readCelcius();\n        if (celsius === null) {\n            return null;\n        }\n        return celsius * 1.8 + 32;\n    };\n    MAX6675.prototype.readRaw = function () {\n        if (this.spiCs) {\n            this.spiCs.low();\n            var value = this.readRaw2();\n            this.spiCs.high();\n            return value;\n        }\n        console.error(\"SPICS is not initialized\");\n        return 0;\n    };\n    MAX6675.prototype.readRaw1 = function () {\n        try {\n            this.spiBus.send(new Uint8Array(MAX6675_READER_CMD));\n            var bytes = this.spiBus.recv(16);\n            if (bytes === null) {\n                console.error(\"MAX6675: recv error\");\n            }\n            return bytes;\n        }\n        catch (err) {\n            console.error(err);\n        }\n        return new Uint8Array();\n    };\n    MAX6675.prototype.readRaw2 = function () {\n        try {\n            var raw = this.spiBus.transfer(new Uint8Array([0])) << 8;\n            raw |= this.spiBus.transfer(new Uint8Array([0]));\n            return raw;\n        }\n        catch (err) {\n            console.error(err);\n        }\n        return 0;\n    };\n    return MAX6675;\n}());\nexports.MAX6675 = MAX6675;\n","\"use strict\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Pulsing = exports.Logging = void 0;\nvar constants_1 = require(\"../../ts-schema/constants\");\npinMode(constants_1.Gpio.ONBOARD_LED, OUTPUT);\nvar LEVEL_NAMES = [\"DEBUG\", \"INFO\", \"ERROR\"];\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 1] = \"INFO\";\n    LogLevel[LogLevel[\"ERROR\"] = 2] = \"ERROR\";\n})(LogLevel || (LogLevel = {}));\nvar Logging = /** @class */ (function () {\n    function Logging() {\n    }\n    Logging.debug = function (code, message, data) {\n        this._log(LogLevel.DEBUG, code, message, data);\n    };\n    Logging.info = function (code, message, data) {\n        this._log(LogLevel.INFO, code, message, data);\n    };\n    Logging.error = function (code, message, data) {\n        this._log(LogLevel.ERROR, code, message, data);\n    };\n    Logging._log = function (level, code, message, data) {\n        if (level >= this.LOG_LEVEL) {\n            message = data ? \"\".concat(message, \" \").concat(JSON.stringify(data)) : message;\n            console.log(\"\".concat(LEVEL_NAMES[level], \" | [\").concat(code, \"] \").concat(message));\n        }\n    };\n    Logging.LOG_LEVEL = LogLevel.DEBUG;\n    return Logging;\n}());\nexports.Logging = Logging;\nvar Pulsing = /** @class */ (function () {\n    function Pulsing() {\n    }\n    Pulsing.up = function () {\n        this._state = HIGH;\n        digitalWrite(constants_1.Gpio.ONBOARD_LED, HIGH);\n    };\n    Pulsing.down = function () {\n        this._state = LOW;\n        digitalWrite(constants_1.Gpio.ONBOARD_LED, LOW);\n    };\n    Pulsing.toggle = function () {\n        this._state = this._state === HIGH ? LOW : HIGH;\n        digitalWrite(constants_1.Gpio.ONBOARD_LED, this._state);\n    };\n    Pulsing._state = HIGH;\n    return Pulsing;\n}());\nexports.Pulsing = Pulsing;\n","\"use strict\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SystemStatsService = void 0;\nvar base_service_1 = require(\"../base-service\");\nvar data_model_1 = require(\"../../../ts-schema/data.model\");\nvar constants_1 = require(\"../../../ts-schema/constants\");\nvar SystemStatsService = /** @class */ (function (_super) {\n    __extends(SystemStatsService, _super);\n    function SystemStatsService(eventBus) {\n        var _this = _super.call(this, eventBus, {\n            serviceCode: constants_1.ServiceCode.SystemStats,\n            serviceType: constants_1.ServiceType.OnDemand,\n            broadcastMode: constants_1.BroadcastMode.OnDemandPolling,\n        }) || this;\n        _this.data = new data_model_1.SystemStatsData();\n        return _this;\n    }\n    SystemStatsService.prototype.setup = function () {\n        _super.prototype.setup.call(this);\n        this.data.arch = process.arch;\n        this.data.platform = process.platform;\n        this.data.version = process.version;\n        this.data.name = board.name;\n        this.data.uid = board.uid;\n    };\n    SystemStatsService.prototype.publishData = function () {\n        var mem = process.memoryUsage();\n        this.data.heapTotal = mem.heapTotal;\n        this.data.heapUsed = mem.heapUsed;\n        this.data.heapPeak = mem.heapPeak;\n        _super.prototype.publishData.call(this);\n    };\n    return SystemStatsService;\n}(base_service_1.BaseService));\nexports.SystemStatsService = SystemStatsService;\n","\"use strict\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ThermometerService = void 0;\nvar max6675_hw_spi_1 = require(\"../lib/max6675-hw-spi\");\nvar hc4051_1 = require(\"../lib/hc4051\");\nvar logger_1 = require(\"../logger\");\nvar base_service_1 = require(\"../base-service\");\nvar data_model_1 = require(\"../../../ts-schema/data.model\");\nvar constants_1 = require(\"../../../ts-schema/constants\");\nvar _muxChannels = constants_1.Hardware.MUX_SENSOR_CONNECTED_ITEMS;\nvar _readerPid = null;\nvar _muxChIndex = 0;\nvar ThermometerService = /** @class */ (function (_super) {\n    __extends(ThermometerService, _super);\n    function ThermometerService(eventBus) {\n        var _this = _super.call(this, eventBus, {\n            serviceCode: constants_1.ServiceCode.Thermometer,\n            serviceType: constants_1.ServiceType.OnDemand,\n            broadcastMode: constants_1.BroadcastMode.OnDemandPolling,\n        }) || this;\n        _this.data = new data_model_1.ThermometerData();\n        return _this;\n    }\n    ThermometerService.prototype.start = function () {\n        var _this = this;\n        _super.prototype.start.call(this);\n        _super.prototype.publishData.call(this);\n        _muxChannels.forEach(function (ch) {\n            _this.data[\"ch_\".concat(ch)] = 0;\n        });\n        this.thermoSensor = new max6675_hw_spi_1.MAX6675({ bus: 1, cs: constants_1.Gpio.THERMO_SENSOR_CS, sck: constants_1.Gpio.THERMO_SENSOR_CLK, miso: constants_1.Gpio.THERMO_SENSOR_DATA });\n        this.thermoSensor.init();\n        this.mux = new hc4051_1.HC4051({ pinA: constants_1.Gpio.MUX_OUT_A, pinB: constants_1.Gpio.MUX_OUT_B, pinC: constants_1.Gpio.MUX_OUT_C, connectedChannels: _muxChannels });\n        this.mux.init();\n        // start delayed read\n        setTimeout(function () {\n            _readerPid = setInterval(function () {\n                var _a;\n                if (_this.mux && _this.thermoSensor) {\n                    _this.mux.enableChannelIndex(_muxChIndex);\n                    _this.data[\"ch_\".concat(_muxChannels[_muxChIndex])] = (_a = _this.thermoSensor.readCelcius()) !== null && _a !== void 0 ? _a : 0;\n                    logger_1.Logging.debug(constants_1.ServiceCode.Thermometer, \"interval.read\", { ch: _muxChannels[_muxChIndex], cx: _muxChIndex, value: _this.data[\"ch_\".concat(_muxChannels[_muxChIndex])], values: _this.data });\n                    _muxChIndex++;\n                    if (_muxChIndex >= _muxChannels.length) {\n                        _muxChIndex = 0;\n                    }\n                }\n            }, constants_1.Hardware.MUX_SENSOR_READ_INTERVAL);\n        }, constants_1.Hardware.MUX_SENSOR_READ_BATCH_TIMEOUT);\n    };\n    ThermometerService.prototype.stop = function () {\n        _super.prototype.stop.call(this);\n        if (_readerPid) {\n            clearInterval(_readerPid);\n            _readerPid = null;\n        }\n        _muxChIndex = 0;\n        if (this.thermoSensor) {\n            this.thermoSensor.close();\n            delete this.thermoSensor;\n            delete this.mux;\n        }\n    };\n    ThermometerService.prototype.publishData = function () {\n        _super.prototype.publishData.call(this);\n    };\n    return ThermometerService;\n}(base_service_1.BaseService));\nexports.ThermometerService = ThermometerService;\n","\"use strict\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TurnSignalService = void 0;\nvar utils_1 = require(\"../utils\");\nvar logger_1 = require(\"../logger\");\nvar button_1 = require(\"button\");\nvar constants_1 = require(\"../../../ts-schema/constants\");\nvar base_service_1 = require(\"../base-service\");\nvar data_model_1 = require(\"../../../ts-schema/data.model\");\nvar defaultTsmConfig = {\n    blinkRate: constants_1.Hardware.TURN_SIGNAL_BLINK_RATE,\n    blinkTimeout: constants_1.Hardware.TURN_SIGNAL_BLINK_TIMEOUT,\n    btnDebounce: constants_1.Hardware.TURN_SIGNAL_BTN_DEBOUNCE,\n    diagCount: constants_1.Hardware.TURN_SIGNAL_DIAG_COUNT,\n    diagRate: constants_1.Hardware.TURN_SIGNAL_DIAG_RATE,\n};\nvar tsmConfig = (_a = (0, utils_1.readObject)(constants_1.FILE_TSM_CONFIG)) !== null && _a !== void 0 ? _a : data_model_1.TsmSettings.default(defaultTsmConfig);\nvar _action = {\n    left: false,\n    right: false,\n};\nvar _state = {\n    left: false,\n    right: false,\n};\nvar _flasherPid = 0;\nvar _cancelerPid = 0;\nvar _diagCounter = 0;\nvar _diagnostic = function () {\n    logger_1.Logging.debug(constants_1.ServiceCode.TurnSignalModule, \"diagnostic\", { _state: _state, _action: _action });\n    logger_1.Pulsing.down();\n    _disableFlasher(\"diag-start\");\n    _flasherPid = setInterval(function () {\n        if (_diagCounter > tsmConfig.diagCount * 2) {\n            _disableFlasher(\"diag-complete [\" + _diagCounter + \"] cycles\");\n            _diagCounter = 0;\n            return;\n        }\n        _state.left = !_state.left;\n        _state.right = !_state.right;\n        digitalToggle(constants_1.Gpio.SIGNAL_OUT_LEFT);\n        digitalToggle(constants_1.Gpio.SIGNAL_OUT_RIGHT);\n        _diagCounter++;\n        logger_1.Pulsing.toggle();\n        logger_1.Logging.debug(constants_1.ServiceCode.TurnSignalModule, \"diagnostic\", { _state: _state, _diagCounter: _diagCounter });\n    }, tsmConfig.diagRate);\n};\nvar _enableFlasher = function (isLeft, isRight, blinkRate, cancelTimeout, doNotCancel) {\n    logger_1.Logging.debug(constants_1.ServiceCode.TurnSignalModule, \"enableFlasher\", { isLeft: isLeft, isRight: isRight });\n    if (doNotCancel) {\n        _cancelerPid = 0;\n        logger_1.Logging.debug(constants_1.ServiceCode.TurnSignalModule, \"will not cancel\", { isLeft: isLeft, isRight: isRight });\n    }\n    else {\n        logger_1.Logging.debug(constants_1.ServiceCode.TurnSignalModule, \"will auto-cancel\", { isLeft: isLeft, isRight: isRight });\n        _cancelerPid = setTimeout(function () {\n            _disableFlasher(\"timeout\");\n            _action.left = false;\n            _action.right = false;\n        }, cancelTimeout);\n    }\n    _flasherPid = setInterval(function () {\n        if (isLeft) {\n            digitalToggle(constants_1.Gpio.SIGNAL_OUT_LEFT);\n            _state.left = !_state.left;\n        }\n        if (isRight) {\n            digitalToggle(constants_1.Gpio.SIGNAL_OUT_RIGHT);\n            _state.right = !_state.right;\n        }\n        logger_1.Pulsing.toggle();\n        logger_1.Logging.debug(constants_1.ServiceCode.TurnSignalModule, \"state\", _state);\n    }, blinkRate);\n};\nvar _disableFlasher = function (reason) {\n    clearInterval(_flasherPid);\n    clearTimeout(_cancelerPid);\n    digitalWrite(constants_1.Gpio.SIGNAL_OUT_LEFT, LOW);\n    digitalWrite(constants_1.Gpio.SIGNAL_OUT_RIGHT, LOW);\n    _flasherPid = 0;\n    _cancelerPid = 0;\n    _state.left = false;\n    _state.right = false;\n    _diagCounter = 0;\n    logger_1.Logging.debug(constants_1.ServiceCode.TurnSignalModule, \"disableFlasher\", { reason: reason });\n    logger_1.Pulsing.up();\n};\nvar _setFlasher = function (isLeft, isRight) {\n    logger_1.Logging.debug(constants_1.ServiceCode.TurnSignalModule, \"setFlasher\", { isLeft: isLeft, isRight: isRight });\n    logger_1.Pulsing.down();\n    _disableFlasher(\"cancel-any\");\n    if (isLeft || isRight) {\n        _enableFlasher(isLeft, isRight, tsmConfig.blinkRate, tsmConfig.blinkTimeout, isLeft && isRight);\n    }\n};\nvar _checkAction = function (btnLeft, btnRight) {\n    var _readLeft = btnLeft.read();\n    var _readRight = btnRight.read();\n    logger_1.Logging.debug(constants_1.ServiceCode.TurnSignalModule, \"checkAction.left-current \".concat(_action.left, \", read: \").concat(_readLeft));\n    logger_1.Logging.debug(constants_1.ServiceCode.TurnSignalModule, \"checkAction.right-current \".concat(_action.right, \", read: \").concat(_readRight));\n    // hazard lights check\n    // if (_readLeft === HIGH && _readRight === HIGH) {\n    // }\n    if (_readLeft === HIGH) {\n        _action.left = !_action.left;\n        logger_1.Logging.debug(constants_1.ServiceCode.TurnSignalModule, \"checkAction.left-HIGH \".concat(_action.left));\n    }\n    else {\n        _action.left = false;\n        // logger.debug(ServiceCode.TurnSignalModule, `checkAction.left-LOW ${_action.left}`);\n    }\n    if (_readRight === HIGH) {\n        _action.right = !_action.right;\n        logger_1.Logging.debug(constants_1.ServiceCode.TurnSignalModule, \"checkAction.right-HIGH \".concat(_action.right));\n    }\n    else {\n        _action.right = false;\n        // logger.debug(ServiceCode.TurnSignalModule, `checkAction.right-LOW ${_action.right}`);\n    }\n    _setFlasher(_action.left, _action.right);\n};\nvar TurnSignalService = /** @class */ (function (_super) {\n    __extends(TurnSignalService, _super);\n    function TurnSignalService(eventBus) {\n        return _super.call(this, eventBus, {\n            serviceCode: constants_1.ServiceCode.TurnSignalModule,\n            serviceType: constants_1.ServiceType.OnDemand,\n            broadcastMode: constants_1.BroadcastMode.OnDemandPolling,\n            commands: Object.values(constants_1.TurnSignalCommands),\n        }) || this;\n    }\n    TurnSignalService.prototype.setup = function () {\n        var _this = this;\n        _super.prototype.setup.call(this);\n        pinMode(constants_1.Gpio.SIGNAL_IN_LEFT, INPUT_PULLUP);\n        pinMode(constants_1.Gpio.SIGNAL_IN_RIGHT, INPUT_PULLUP);\n        pinMode(constants_1.Gpio.SIGNAL_OUT_LEFT, OUTPUT);\n        pinMode(constants_1.Gpio.SIGNAL_OUT_RIGHT, OUTPUT);\n        _diagnostic();\n        this.leftButton = new button_1.Button(constants_1.Gpio.SIGNAL_IN_LEFT, { mode: INPUT, event: RISING, debounce: tsmConfig.btnDebounce });\n        this.rightButton = new button_1.Button(constants_1.Gpio.SIGNAL_IN_RIGHT, { mode: INPUT, event: RISING, debounce: tsmConfig.btnDebounce });\n        this.leftButton.on(\"click\", function () {\n            _checkAction(_this.leftButton, _this.rightButton);\n        });\n        this.rightButton.on(\"click\", function () {\n            _checkAction(_this.leftButton, _this.rightButton);\n        });\n    };\n    TurnSignalService.prototype.handleCommand = function (command) {\n        _super.prototype.handleCommand.call(this, command);\n        if (command === constants_1.TurnSignalCommands.DIAG) {\n            _diagnostic();\n        }\n        else {\n            switch (command) {\n                case constants_1.TurnSignalCommands.ALL:\n                    _action.left = true;\n                    _action.right = true;\n                    break;\n                case constants_1.TurnSignalCommands.LEFT:\n                    _action.left = !_action.left;\n                    _action.right = false;\n                    break;\n                case constants_1.TurnSignalCommands.RIGHT:\n                    _action.left = false;\n                    _action.right = !_action.right;\n                    break;\n                case constants_1.TurnSignalCommands.NONE:\n                    _action.left = false;\n                    _action.right = false;\n                    break;\n                default:\n                    _action.left = false;\n                    _action.right = false;\n                    break;\n            }\n            _setFlasher(_action.left, _action.right);\n        }\n    };\n    TurnSignalService.prototype.publishData = function () {\n        this.data.state = _state;\n        this.data.action = _action;\n        _super.prototype.publishData.call(this);\n    };\n    return TurnSignalService;\n}(base_service_1.BaseService));\nexports.TurnSignalService = TurnSignalService;\n","\"use strict\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VehicleInfoService = void 0;\nvar utils_1 = require(\"../utils\");\nvar constants_1 = require(\"../../../ts-schema/constants\");\nvar data_model_1 = require(\"../../../ts-schema/data.model\");\nvar base_service_1 = require(\"../base-service\");\nvar logger_1 = require(\"../logger\");\nvar VehicleInfoService = /** @class */ (function (_super) {\n    __extends(VehicleInfoService, _super);\n    function VehicleInfoService(eventBus) {\n        var _this = _super.call(this, eventBus, {\n            serviceCode: constants_1.ServiceCode.VehicleInfo,\n            serviceType: constants_1.ServiceType.OnDemand,\n            broadcastMode: constants_1.BroadcastMode.OnDemandPolling,\n        }) || this;\n        _this.data = new data_model_1.VehicleInfoData();\n        return _this;\n    }\n    VehicleInfoService.prototype.peristSettings = function (raw) {\n        _super.prototype.peristSettings.call(this, raw);\n        this.setVehicleInfo(JSON.parse(raw));\n    };\n    VehicleInfoService.prototype.setVehicleInfo = function (payload) {\n        if (payload) {\n            logger_1.Logging.debug(constants_1.ServiceCode.VehicleInfo, \"setVehicleInfo payload:\", payload);\n        }\n        else {\n            logger_1.Logging.debug(constants_1.ServiceCode.VehicleInfo, \"setVehicleInfo payload: null\");\n        }\n        var currentVehicleInfo = this.getVehicleInfo();\n        var newVehicleInfo = payload ? Object.assign(currentVehicleInfo, payload) : currentVehicleInfo;\n        logger_1.Logging.debug(constants_1.ServiceCode.VehicleInfo, \"setVehicleInfo newVehicleInfo:\", newVehicleInfo);\n        (0, utils_1.writeObject)(constants_1.FILE_VHI_DATA, newVehicleInfo);\n    };\n    VehicleInfoService.prototype.getVehicleInfo = function () {\n        if ((0, utils_1.isFileExist)(constants_1.FILE_VHI_DATA)) {\n            var vehicleInfo = (0, utils_1.readFile)(constants_1.FILE_VHI_DATA);\n            logger_1.Logging.debug(constants_1.ServiceCode.VehicleInfo, \"getVehicleInfo vehicleInfo:\", vehicleInfo);\n            return JSON.parse(vehicleInfo);\n        }\n        return new data_model_1.VehicleInfoData();\n    };\n    VehicleInfoService.prototype.setup = function () {\n        if (!(0, utils_1.isFileExist)(constants_1.FILE_VHI_DATA)) {\n            logger_1.Logging.debug(constants_1.ServiceCode.VehicleInfo, \"setup vehicleInfoFile:\", constants_1.FILE_VHI_DATA);\n            this.setVehicleInfo(new data_model_1.VehicleInfoData());\n        }\n        else {\n            logger_1.Logging.debug(constants_1.ServiceCode.VehicleInfo, \"setup vehicleInfoFile exists:\", constants_1.FILE_VHI_DATA);\n        }\n        _super.prototype.setup.call(this);\n    };\n    VehicleInfoService.prototype.publishData = function () {\n        this.data = this.getVehicleInfo();\n        _super.prototype.publishData.call(this);\n    };\n    return VehicleInfoService;\n}(base_service_1.BaseService));\nexports.VehicleInfoService = VehicleInfoService;\n","\"use strict\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VehicleSensorService = void 0;\nvar base_service_1 = require(\"../base-service\");\nvar constants_1 = require(\"../../../ts-schema/constants\");\nvar data_model_1 = require(\"../../../ts-schema/data.model\");\nvar BATTERY_VOLTAGE_SCALING_FACTOR = (constants_1.Hardware.BATTERY_VOLTAGE_R1 + constants_1.Hardware.BATTERY_VOLTAGE_R2) / constants_1.Hardware.BATTERY_VOLTAGE_R2;\nvar VehicleSensorService = /** @class */ (function (_super) {\n    __extends(VehicleSensorService, _super);\n    function VehicleSensorService(eventBus) {\n        var _this = _super.call(this, eventBus, {\n            serviceCode: constants_1.ServiceCode.VehicleSensor,\n            serviceType: constants_1.ServiceType.OnDemand,\n            broadcastMode: constants_1.BroadcastMode.OnDemandPolling,\n        }) || this;\n        _this.rpmSignalCounter = 0;\n        _this.rpmSignalLastTime = 0;\n        _this.data = new data_model_1.VehicleSensorData();\n        return _this;\n    }\n    VehicleSensorService.prototype.start = function () {\n        _super.prototype.start.call(this);\n        attachInterrupt(constants_1.Gpio.VEHICLE_SENSOR_RPM, this.interruptRpmHandler.bind(this), RISING);\n    };\n    VehicleSensorService.prototype.stop = function () {\n        _super.prototype.stop.call(this);\n        detachInterrupt(constants_1.Gpio.VEHICLE_SENSOR_RPM);\n    };\n    VehicleSensorService.prototype.interruptRpmHandler = function () {\n        this.rpmSignalCounter++;\n        console.log(\"rpm signal counter\", this.rpmSignalCounter);\n    };\n    VehicleSensorService.prototype.calculateRpm = function () {\n        this.data.rpm = -1;\n        var currentTime = millis();\n        var deltaTime = currentTime - this.rpmSignalLastTime;\n        if (deltaTime > 0) {\n            this.data.rpm = (this.rpmSignalCounter / deltaTime) * 1000 * 60;\n        }\n        this.rpmSignalCounter = 0;\n        this.rpmSignalLastTime = currentTime;\n    };\n    VehicleSensorService.prototype.calculateSpeed = function () {\n        this.data.speed = -1;\n    };\n    VehicleSensorService.prototype.calculateTpmsData = function () {\n        this.data.tireFront = -1;\n        this.data.tireRear = -1;\n        this.data.tempFront = -1;\n        this.data.tempRear = -1;\n    };\n    VehicleSensorService.prototype.calculateTemperature = function () {\n        var raw_temp = analogRead(constants_1.Gpio.VEHICLE_SENSOR_TEMP);\n        var raw_temp_volts = raw_temp * constants_1.Hardware.ADC_REF_MAX_VOLTAGE;\n        this.data.temp = constants_1.Hardware.TEMPERATURE_OFFSET - (raw_temp_volts - constants_1.Hardware.ADC_OFFSET_VOLTAGE) / constants_1.Hardware.TEMPERATURE_SCALING_FACTOR;\n    };\n    VehicleSensorService.prototype.calculateVref = function () {\n        var raw_vref = analogRead(constants_1.Gpio.VEHICLE_SENSOR_VREF);\n        this.data.vref = raw_vref * constants_1.Hardware.ADC_SCALING_FACTOR;\n    };\n    VehicleSensorService.prototype.calculateBattery = function () {\n        var raw_batt = analogRead(constants_1.Gpio.VEHICLE_SENSOR_BATT);\n        this.data.batt = raw_batt * constants_1.Hardware.ADC_REF_MAX_VOLTAGE * BATTERY_VOLTAGE_SCALING_FACTOR;\n    };\n    VehicleSensorService.prototype.setup = function () {\n        _super.prototype.setup.call(this);\n        pinMode(constants_1.Gpio.VEHICLE_SENSOR_BATT, INPUT);\n        pinMode(constants_1.Gpio.VEHICLE_SENSOR_AUX, INPUT);\n        pinMode(constants_1.Gpio.VEHICLE_SENSOR_RPM, INPUT);\n        pinMode(constants_1.Gpio.VEHICLE_SENSOR_SPEED, INPUT);\n        pinMode(constants_1.Gpio.VEHICLE_SENSOR_IGN, INPUT);\n    };\n    VehicleSensorService.prototype.publishData = function () {\n        this.data.uptime = millis();\n        this.calculateTemperature();\n        this.calculateVref();\n        this.calculateBattery();\n        this.calculateRpm();\n        this.calculateSpeed();\n        this.calculateTpmsData();\n        _super.prototype.publishData.call(this);\n    };\n    return VehicleSensorService;\n}(base_service_1.BaseService));\nexports.VehicleSensorService = VehicleSensorService;\n","\"use strict\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.scaler = exports.readObject = exports.writeObject = exports.readFile = exports.writeFile = exports.isFileExist = void 0;\nvar fs_1 = require(\"fs\");\nvar textEncoder = new TextEncoder();\nvar textDecoder = new TextDecoder();\nvar isFileExist = function (filepath) {\n    return fs_1.default === null || fs_1.default === void 0 ? void 0 : fs_1.default.exists(filepath);\n};\nexports.isFileExist = isFileExist;\nvar writeFile = function (filepath, unencodedString) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, fs_1.default.writeFile(filepath, textEncoder.encode(unencodedString))];\n            case 1:\n                _a.sent();\n                return [2 /*return*/];\n        }\n    });\n}); };\nexports.writeFile = writeFile;\nvar readFile = function (filepath) {\n    if (!(0, exports.isFileExist)(filepath)) {\n        return null;\n    }\n    var raw = fs_1.default.readFile(filepath);\n    return textDecoder.decode(raw);\n};\nexports.readFile = readFile;\nvar writeObject = function (filepath, data) {\n    (0, exports.writeFile)(filepath, JSON.stringify(data));\n};\nexports.writeObject = writeObject;\nvar readObject = function (filepath) {\n    var raw = (0, exports.readFile)(filepath);\n    return raw ? JSON.parse(raw) : null;\n};\nexports.readObject = readObject;\nvar scaler = function (rangeFrom, rangeTo) {\n    var d = (rangeTo[1] - rangeTo[0]) / (rangeFrom[1] - rangeFrom[0]);\n    return function (value) { return (value - rangeFrom[0]) * d + rangeTo[0]; };\n};\nexports.scaler = scaler;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Gpio = exports.Hardware = exports.EventType = exports.TurnSignalCommands = exports.ServiceCommand = exports.ServiceCode = exports.BroadcastMode = exports.ServiceStatus = exports.ServiceType = exports.Seperator = exports.FILE_BUNDLE = exports.FILE_VHI_DATA = exports.FILE_TSM_CONFIG = exports.MaxItemSize = void 0;\nexports.MaxItemSize = 9999;\nexports.FILE_TSM_CONFIG = \"data.tsm-config.json\";\nexports.FILE_VHI_DATA = \"data-vehicle-info.json\";\nexports.FILE_BUNDLE = \"bundle.js\";\nexports.Seperator = {\n    SerialCommand: \"+\",\n    ServiceData: \"=\",\n};\nvar ServiceType;\n(function (ServiceType) {\n    ServiceType[\"AlwaysRun\"] = \"ALWAYS_RUN\";\n    ServiceType[\"OnDemand\"] = \"ON_DEMAND\";\n    ServiceType[\"OneTime\"] = \"ONE_TIME\";\n})(ServiceType || (exports.ServiceType = ServiceType = {}));\nvar ServiceStatus;\n(function (ServiceStatus) {\n    ServiceStatus[\"Initialized\"] = \"INITIALIZED\";\n    ServiceStatus[\"Available\"] = \"AVAILABLE\";\n    ServiceStatus[\"Ready\"] = \"READY\";\n    ServiceStatus[\"Started\"] = \"STARTED\";\n    ServiceStatus[\"Stopped\"] = \"STOPPED\";\n    ServiceStatus[\"Error\"] = \"ERROR\";\n})(ServiceStatus || (exports.ServiceStatus = ServiceStatus = {}));\nvar BroadcastMode;\n(function (BroadcastMode) {\n    BroadcastMode[\"ContinuousStream\"] = \"CONTINUOUS_STREAM\";\n    BroadcastMode[\"OnDemandPolling\"] = \"ON_DEMAND_POLLING\";\n})(BroadcastMode || (exports.BroadcastMode = BroadcastMode = {}));\nexports.ServiceCode = {\n    SystemStats: \"SYS\",\n    VehicleSensor: \"VHC\",\n    VehicleInfo: \"VHI\",\n    Thermometer: \"THE\",\n    TurnSignalModule: \"TSM\",\n    Module: \"M0\",\n    EventBus: \"BUS\",\n    Main: \"MAIN\",\n    Heartbeat: \"BEAT\",\n};\nexports.ServiceCommand = {\n    START: \"START\",\n    STOP: \"STOP\",\n    INFO: \"INFO\",\n    DATA: \"DATA\",\n    SET: \"SET\",\n};\nexports.TurnSignalCommands = {\n    DIAG: \"DIAG\",\n    LEFT: \"LEFT\",\n    RIGHT: \"RIGHT\",\n    ALL: \"ALL\",\n    NONE: \"NONE\",\n};\nexports.EventType = {\n    CommandForModule: \"MODULE_COMMAND\",\n    CommandForService: \"SERVICE_COMMAND\",\n    DataFromService: \"SERVICE_DATA\",\n    DataFromSerial: \"SERIAL_DATA\",\n};\nexports.Hardware = {\n    MCU_NAME: \"HDMCU\",\n    // SERIAL_BAUD_COM: 9600,\n    // SERIAL_BAUD_BT: 9600,\n    MUX_SENSOR_CONNECTED_ITEMS: [0, 1, 2, 3, 4, 5, 6, 7],\n    MUX_SENSOR_READ_INTERVAL: 1000,\n    MUX_SENSOR_READ_BATCH_TIMEOUT: 3000,\n    TURN_SIGNAL_BTN_DEBOUNCE: 100,\n    TURN_SIGNAL_BLINK_RATE: 400,\n    TURN_SIGNAL_BLINK_TIMEOUT: 20000,\n    TURN_SIGNAL_DIAG_RATE: 100,\n    TURN_SIGNAL_DIAG_TIMEOUT: 2000,\n    TURN_SIGNAL_DIAG_COUNT: 3,\n    // TURN_SIGNAL_INTERRUPT_WAIT: 100,\n    ADC_BIT_MAX_VALUE: 4096, // 1 << 12\n    ADC_REF_MAX_VOLTAGE: 3.3,\n    ADC_SCALING_FACTOR: 6.95,\n    // ADC_CONVERSION_FACTOR: 0.0008056640625, // 3.3 / 1 << 12\n    ADC_OFFSET_VOLTAGE: 0.706,\n    TEMPERATURE_SCALING_FACTOR: 0.001721,\n    TEMPERATURE_OFFSET: 27,\n    BATTERY_VOLTAGE_R1: 33000,\n    BATTERY_VOLTAGE_R2: 7500,\n    // BATTERY_VOLTAGE_LOSS: 0.01,\n    // BATTERY_VOLTAGE_MIN: 11.0,\n    // BATTERY_VOLTAGE_MAX: 15.0,\n    SERVICE_POLL_INTERVAL: 5000,\n    HEARTBEAT_PUSH_INTERVAL: 5000,\n};\n// hardware voltage simulation\n// https://www.tinkercad.com/things/irP9OkxQxpl-brilliant-leelo/\n// for standard rpi pico\n// https://pico.pinout.xyz/\n// https://electrocredible.com/raspberry-pi-pico-w-pinout-guide-diagrams/\nexports.Gpio = {\n    // functionality: GP pin,   // name - notes/wiring\n    ONBOARD_LED: 25, // GP25 - LED\n    VEHICLE_SENSOR_TEMP: 30, // GP30 - ADC4 - virtual\n    VEHICLE_SENSOR_VREF: 29, // GP29 - ADC3\n    VEHICLE_SENSOR_SPEED: 28, // GP28 - ADC2\n    VEHICLE_SENSOR_RPM: 27, // GP27 - ADC1\n    VEHICLE_SENSOR_BATT: 26, // GP26 - ADC0\n    VEHICLE_SENSOR_IGN: 21, // GP21 - D_IGN\n    VEHICLE_SENSOR_AUX: 20, // GP20 - D_AUX\n    SIGNAL_IN_LEFT: 19, // GP19 - D_SIG_L_IN\n    SIGNAL_IN_RIGHT: 18, // GP18 - D_SIG_R_IN\n    SIGNAL_OUT_LEFT: 16, // GP16 - D_SIG_L_OUT\n    SIGNAL_OUT_RIGHT: 17, // GP17 - D_SIG_R_OUT\n    THERMO_SENSOR_CLK: 10, // GP10 - D_SCK\n    THERMO_SENSOR_DATA: 12, // GP12 - D_SO\n    THERMO_SENSOR_CS: 13, // GP13 - D_CS\n    MUX_OUT_A: 9, // GP9  - D_MUX_A\n    MUX_OUT_B: 8, // GP8  - D_MUX_B\n    MUX_OUT_C: 7, // GP7  - D_MUX_C\n    BT_SERIAL_RX: 1, // GP1  - D_BT_RX\n    BT_SERIAL_TX: 0, // GP0  - D_BT_TX\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MuxSettings = exports.TsmSettings = exports.TsmControlData = exports.TsmData = exports.SystemStatsData = exports.ThermometerData = exports.VehicleSensorData = exports.VehicleInfoData = void 0;\nvar VehicleInfoData = /** @class */ (function () {\n    function VehicleInfoData() {\n        this.model = \"\";\n        this.vin = \"\";\n        this.year = 0;\n        this.make = \"\";\n        this.owner = \"\";\n        this.plate = \"\";\n        this.regId = \"\";\n        this.oilDate = 0;\n        this.oilKm = 0;\n        this.oilIntervalKm = 0;\n        this.tireFrontInfo = \"\";\n        this.tireRearInfo = \"\";\n        this.tireFrontDate = 0;\n        this.tireRearDate = 0;\n        this.tireFrontKm = 0;\n        this.tireRearKm = 0;\n        this.beltInfo = \"\";\n        this.beltDate = 0;\n        this.batteryInfo = \"\";\n        this.batteryDate = 0;\n        this.inspectDate = 0;\n        this.insuranceDate = 0;\n        this.serviceDate = 0;\n        this.serviceInterval = 0;\n        this.serviceKm = 0;\n    }\n    return VehicleInfoData;\n}());\nexports.VehicleInfoData = VehicleInfoData;\nvar VehicleSensorData = /** @class */ (function () {\n    function VehicleSensorData() {\n        this.temp = 0;\n        this.vref = 0;\n        this.batt = 0;\n        this.rpm = 0;\n        this.speed = 0;\n        this.tireFront = 0;\n        this.tempFront = 0;\n        this.tireRear = 0;\n        this.tempRear = 0;\n    }\n    return VehicleSensorData;\n}());\nexports.VehicleSensorData = VehicleSensorData;\nvar ThermometerData = /** @class */ (function () {\n    function ThermometerData() {\n        this.ch_0 = 0;\n        this.ch_1 = 0;\n        this.ch_2 = 0;\n        this.ch_3 = 0;\n        this.ch_4 = 0;\n        this.ch_5 = 0;\n        this.ch_6 = 0;\n        this.ch_7 = 0;\n    }\n    return ThermometerData;\n}());\nexports.ThermometerData = ThermometerData;\nvar SystemStatsData = /** @class */ (function () {\n    function SystemStatsData() {\n        this.arch = \"\";\n        this.platform = \"\";\n        this.version = \"\";\n        this.name = \"\";\n        this.uid = \"\";\n        this.heapTotal = 0;\n        this.heapUsed = 0;\n        this.heapPeak = 0;\n    }\n    return SystemStatsData;\n}());\nexports.SystemStatsData = SystemStatsData;\nvar TsmData = /** @class */ (function () {\n    function TsmData() {\n        this.state = new TsmControlData();\n        this.action = new TsmControlData();\n    }\n    return TsmData;\n}());\nexports.TsmData = TsmData;\nvar TsmControlData = /** @class */ (function () {\n    function TsmControlData() {\n        this.left = false;\n        this.right = false;\n    }\n    return TsmControlData;\n}());\nexports.TsmControlData = TsmControlData;\nvar TsmSettings = /** @class */ (function () {\n    function TsmSettings() {\n        this.blinkRate = 0;\n        this.blinkTimeout = 0;\n        this.btnDebounce = 0;\n        this.diagCount = 0;\n        this.diagRate = 0;\n    }\n    TsmSettings.default = function (defaults) {\n        var tsm = {\n            blinkRate: defaults.blinkRate,\n            blinkTimeout: defaults.blinkTimeout,\n            btnDebounce: defaults.btnDebounce,\n            diagCount: defaults.diagCount,\n            diagRate: defaults.diagRate,\n        };\n        return tsm;\n    };\n    return TsmSettings;\n}());\nexports.TsmSettings = TsmSettings;\nvar MuxSettings = /** @class */ (function () {\n    function MuxSettings() {\n        this.sensorItems = [];\n        this.readInterval = 0;\n        this.readBatchTimeout = 0;\n    }\n    return MuxSettings;\n}());\nexports.MuxSettings = MuxSettings;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SchemaVersion = void 0;\nexports.SchemaVersion = \"2024-11-18T20:56:23\";\n","module.exports = require(\"button\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"gpio\");","module.exports = require(\"spi\");","module.exports = require(\"uart\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar logger_1 = require(\"./logger\");\nvar event_bus_1 = require(\"./event-bus\");\nvar event_handler_1 = require(\"./event-handler\");\nvar schema_version_1 = require(\"../../ts-schema/schema.version\");\nvar constants_1 = require(\"../../ts-schema/constants\");\nvar turn_signal_service_1 = require(\"./services/turn-signal-service\");\nvar system_stats_service_1 = require(\"./services/system-stats-service\");\nvar vehicle_sensor_service_1 = require(\"./services/vehicle-sensor-service\");\nvar thermometer_service_1 = require(\"./services/thermometer-service\");\nvar vehicle_info_service_1 = require(\"./services/vehicle-info.service\");\nlogger_1.Pulsing.up();\nlogger_1.Logging.info(constants_1.ServiceCode.Main, \"schema version\", schema_version_1.SchemaVersion);\nvar services = [new vehicle_info_service_1.VehicleInfoService(event_bus_1.eventBus), new vehicle_sensor_service_1.VehicleSensorService(event_bus_1.eventBus), new system_stats_service_1.SystemStatsService(event_bus_1.eventBus), new thermometer_service_1.ThermometerService(event_bus_1.eventBus), new turn_signal_service_1.TurnSignalService(event_bus_1.eventBus)];\nservices.forEach(function (service) {\n    service.setup();\n    if (service.options.serviceType === constants_1.ServiceType.AlwaysRun) {\n        service.start();\n    }\n});\nvar dispatchModuleCommand = function (command) {\n    switch (command) {\n        case \"DIAG\":\n            logger_1.Logging.info(constants_1.ServiceCode.Main, \"diagnostic event\");\n            (0, event_handler_1.publishToSerial)(constants_1.ServiceCode.Main, \"DIAG\", \"diagnostic event\");\n            break;\n        case \"START\":\n            services.filter(function (s) { return s.options.serviceType === constants_1.ServiceType.OnDemand; }).forEach(function (service) { return service.start(); });\n            (0, event_handler_1.publishToSerial)(constants_1.ServiceCode.Main, \"START\", services.filter(function (s) { return s.isRunning; }).map(function (s) { return s.options; }));\n            break;\n        case \"STOP\":\n            services.filter(function (s) { return s.options.serviceType === constants_1.ServiceType.OnDemand; }).forEach(function (service) { return service.stop(); });\n            (0, event_handler_1.publishToSerial)(constants_1.ServiceCode.Main, \"STOP\", services.filter(function (s) { return !s.isRunning; }).map(function (s) { return s.options; }));\n            break;\n        case \"LIST_ALL\":\n            logger_1.Logging.info(constants_1.ServiceCode.Main, \"list all services\", services.map(function (s) { return s.options; }));\n            (0, event_handler_1.publishToSerial)(constants_1.ServiceCode.Main, \"LIST_ALL\", services.map(function (s) { return s.options; }));\n            break;\n        case \"LIST_RUN\":\n            logger_1.Logging.info(constants_1.ServiceCode.Main, \"list running services\", services.filter(function (s) { return s.isRunning; }).map(function (s) { return s.options; }));\n            (0, event_handler_1.publishToSerial)(constants_1.ServiceCode.Main, \"LIST_RUN\", services.filter(function (s) { return s.isRunning; }).map(function (s) { return s.options; }));\n            break;\n        default:\n            logger_1.Logging.error(constants_1.ServiceCode.Main, \"unknown module command\", command);\n            (0, event_handler_1.publishToSerial)(constants_1.ServiceCode.Main, \"ERR\", \"unknown module command: \".concat(command));\n            break;\n    }\n};\nevent_bus_1.eventBus.on(constants_1.EventType.CommandForModule, function (serviceCode, command, rawData) {\n    logger_1.Logging.debug(constants_1.ServiceCode.Main, constants_1.EventType.CommandForModule, { serviceCode: serviceCode, command: command, rawData: rawData });\n    dispatchModuleCommand(command);\n});\n"],"names":[],"sourceRoot":""}